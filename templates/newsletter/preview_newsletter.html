{% extends 'base_admin.html' %}
{% block content %}
{% include 'newsletter/style.html' %}

<div class="container mt-4">
    <div class="card p-4 mx-auto" style="max-width: 900px;">
        <h2 class="mb-4 text-center">Preview Newsletter</h2>

        <!-- Newsletter Title -->
        <h3 class="text-center">{{ newsletter.title }}</h3>
        <p class="text-muted text-center">
            Volume {{ newsletter.volume }} · {{ newsletter.month }} · {{ newsletter.created_at|date:"M d, Y" }}
        </p>

        <!-- Main Content -->
        <div class="mb-4 p-4 rounded shadow-sm" style="background: #f9fafb; border-left: 4px solid #4a90e2;">
            <div style="font-size: 16px; line-height: 1.7; color: #333;">
                {{ newsletter.main_content|safe }}
            </div>
        </div>

        <!-- Sections -->
        {% for sec in sections %}
    <div class="mb-4 p-4 border rounded shadow-sm" style="background: #f9fafb;">
        {% if sec.heading %}
            <h5 class="mb-2" style="font-weight: 600; color: #333;">
                {{ sec.heading }}
            </h5>
        {% endif %}

        {% if sec.content %}
            <div style="font-size: 16px; line-height: 1.7; color: #555;">
                {{ sec.content|safe }}
            </div>
        {% endif %}

        {% if sec.image %}
            <img src="{{ sec.image.url }}" class="img-fluid mt-3 rounded" alt="{{ sec.heading|default:'Section Image' }}">
        {% endif %}

        {% if sec.link %}
            <p class="mt-3">
                <a href="{{ sec.link }}" target="_blank" class="btn btn-sm btn-outline-primary">
                    Learn More
                </a>
            </p>
        {% endif %}
    </div>
{% empty %}
    <p>No sections added yet.</p>
{% endfor %}

        <!-- Actions -->
        <div class="text-center mt-4">
            <a href="{% url 'newsletter:send_newsletter' newsletter.id %}" class="btn btn-primary">Send Newsletter</a>
            <a href="{% url 'newsletter:add_sections' newsletter.id %}" class="btn btn-secondary ms-2">Add More Sections</a>
        </div>
    </div>
</div>
{% endblock %}
